//--------------------------------------------------------------------------------------------------
//= map.hsp
//--------------------------------------------------------------------------------------------------
//	マップチップ配置などを管理する
//--------------------------------------------------------------------------------------------------

	//----------------------------------------------------------------------------------------------
	//= マップエディット(上層チップ)
	//----------------------------------------------------------------------------------------------
		//壁ブロックを選択している
		if( CurrentSelectItem = WALL_BLOCK ){
			//カーソルがマップ内にあるか
			if(CursorPosX != -1)&(CursorPosY != -1) {
				x = CursorPosX : y = CursorPosY
				//下層マップに障害物がないか
				if(MapDataLower(x, y)== 0){
					//そこにキャラクターがいないか
					if( MapCharacter(x, y) == -1 ){
						//左クリック
						if(GetKeyInput(MO_LEFT) != 0){
							if(MapDataUpper(x, y) != 1){
								MapUndoSet x, y, MapDataUpper(x, y)
								MapDataUpper(x, y) = 1
								GoalDisCalc
								//設置した上層チップがルール違反であればUndo
								if(MapRuleCheck() == 1){
									MapUndo
								}
							}
						}
						//右クリック
						if(GetKeyInput(MO_RIGHT) != 0){
							x = CursorPosX : y = CursorPosY
							if(MapDataLower(x, y) == 0){
								if(MapDataUpper(x, y) != 0){
									MapDataUpper(x, y) = 0
									GoalDisCalc
								}
							}
						}
					}
				}
			}
		}